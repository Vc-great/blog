​	性能优化是一个复杂的概念,在HTTP里可以分解为服务器性能优化,客户端性能优化和传输链路优化

​	从服务器到客户端的二传输链路可以分三个部分,我们能够优化的是前两个部分,也就第一公里和中间一公里

​	有很多工具可以测量这些指标,服务器端有ab top sar等,客户端可以使用测试网站,游览器开发者工具	

**服务器优化**

​	服务器有三个主要性能指标:**吞吐量**,**并发数**和**响应时间**,此外还需要考虑资源利用率,如:CPU 内存 硬盘和网卡等系统资源的占用程度,利用率过高或过低都可能有问题

**吞吐量:** 

​	RPS,每秒的请求次数,也有叫TPS QPS,它是服务器最基本的性能指标,RPS越高就说明服务器性能越好

**并发数:**

​	服务器的负载能力,也就是服务器能够同时支持的客户端数量,当然也是越多越好,能够服务更多的用户

**响应时间:**

​	服务器的处理能力,也就是快慢程度,响应时间越短,单位时间内服务器就能够给越多的用户提供服务,提高吞吐量和并发数



**客户端优化**

​	客户端的基本性能指标是延迟,影响因素有**地理距离**,**带宽**,**DNS查询**,**TCP握手**等;

​	首先，我们必须谨记有一个“不可逾越”的障碍——光速，因为地理距离而导致的延迟是无法克服的，访问数千公里外的网站显然会有更大的延迟。

其次，第二个因素是带宽，它又包括接入互联网时的电缆、WiFi、4G 和运营商内部网络、运营商之间网络的各种带宽，每一处都有可能成为数据传输的瓶颈，降低传输速度，增加延迟。

第三个因素是 DNS 查询，如果域名在本地没有缓存，就必须向 DNS 系统发起查询，引发一连串的网络通信成本，而在获取 IP 地址之前客户端只能等待，无法访问网站，

第四个因素是 TCP 握手，你应该对它比较熟悉了吧，必须要经过 SYN、SYN/ACK、ACK 三个包之后才能建立连接，它带来的延迟由光速和带宽共同决定。

建立 TCP 连接之后，就是正常的数据收发了，后面还有解析 HTML、执行 JavaScript、排版渲染等，这些也会耗费一些时间。不过它们已经不属于 HTTP 了，所以不在今天的讨论范围之内。

**HTTP传输链路**

![HTTP性能优化1](HTTP优化.assets/HTTP性能优化1.png)

**第一公里**

​	网站的出口,也就是服务器接入互联网的传输线路,它的带宽直接决定了网站对外的服务能力,也就是吞吐量等指标.

**解决:**尽量购买大带宽,接入更多的运营商网络

**中间一公里**

​	由许多小网络组成的实际的互联网,地理距离,网络互通都严重硬性了传输速度.

**解决:**CDN

**最后一公里**

​	用户访问互联网的入口,客户端字节的宽带

**第0公里**

​	网站内部的web服务器,它也是一个小型的网络,中间的数据处理,传输会导致延迟,增加服务器的响应时间,也是一个不可忽视的优化点

