**重定向**

​	重定向会发送两次`HTTP`请求,第一次请求返回`302`,然后第二个请求被重定向到了`/XXX.html`,用户无感知

**Location**	

​	响应字段,只有配合301/302状态码才有意义,它标记了服务器要去重定向的URI

​	游览器收到301/302报文,会检查响应头中有木有`Location`,如果有就从字段值里提取出URI,发出新的HTTP请求,相当于自动替我们点击这个链接

​	`Location`中的URI可以使用绝对URI,也可以使用相对URI.相对URI省略了`scheme`和`host:port`,只有`path`和`query`部分

**注意**	

​	站内跳转,可以放心使用相对URI,跳转到站外,就必须用觉得URI

```js
http://www.chrono.com/18-1?dst=nginx.org           # 错误
http://www.chrono.com/18-1?dst=http://nginx.org    # 正确

```

301/302跳转没有Location,页面提示:**302 Found**

**状态码**

1. 301
   永久重定向,游览器看到301,会做适当的优化.比如:历史记录,更新书签,下次可能就会直接用的新的URI访问,省去了再次跳转的成本.搜索引擎的爬虫看到301,也会更新索引库,不再使用老的URI
2. 302
   临时重定向,游览器或爬虫看到302,会认为原来的URI仍然有效,只会跳转页面不记录新的URI,也不会有其他的多余动作,下次访问还是用原URI

有的浏览器和服务器可能不支持，开发时应当慎重:

1. 303

   类似 302，但要求重定向后的请求改为 GET 方法，访问一个结果页面，避免 POST/PUT 重复操作；

4. 307
   类似 302，但重定向后请求里的方法和实体不允许变动，含义比 302 更明确

5. 308

   类似 307，不允许重定向后的请求变动，但它是 301“永久重定向”的含义

**应用场景**

1. 资源不可用

   域名变更,服务器变更,网站改版,系统维护

2. 避免重复
   多个网址都跳转到一个URI,增加访问入口的同时还不会增加额外的工作量
   如:有的网站会申请多个名称类似的域名,然后把他们再重定向到主站上

**相关问题**

1. 想能损耗
   重定向的机制觉得了一个跳转会有两次请求-应答,比正常的访问多了一次
2. 循环跳转
   可能会出现A=>B=>C=>A的无限循环,所以`HTTP`协议特别规定,游览器必须具有检测循环跳转的能力,在发现这种情况时应当停止发送轻轻并给出错误提示 : 该网页无法正常工作
   